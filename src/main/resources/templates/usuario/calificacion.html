<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head th:replace="fragments/header :: head('Calificar Función',~{::style})">
        <style>
            .card__cover {
                overflow-x: hidden;
            }

            .card__cover img {
                display: block;
                width: 100%;
                object-fit: cover;
                object-position: 50% 50%;
                margin-top: 0;
                aspect-ratio: 9 / 15;
            }

            input[type="radio"] {
                display: none;
            }

            label {
                color: grey;
            }

            .clasificacion {
                direction: rtl;
                unicode-bidi: bidi-override;
            }

            label:hover,
            label:hover ~ label {
                color: #ff5860;
            }

            input[type="radio"]:checked ~ label {
                color: #ff5860;
            }

        </style>
    </head>
    <body class="body">

        <form method="post" th:action="@{/guardarCalificacion}" >
            <section class="home" style="padding-block: 1px; margin-top: 0px">
                <div class="container" style="margin-top: 48px;">
                    <div class="row">

                        <div class="col-12 my-5">
                            <h1 class="home__title">Calificación de la función</h1>
                        </div>
                        <div class="col-12">
                            <h1 class="home__title" style="font-size: 30px">Obra</h1>
                        </div>

                    </div>

                    <div class="catalog">
                        <div class="container">
                            <div class="row" style="margin-top: 48px;">
                                <!-- card -->
                                <div class="col-6 col-sm-12 col-lg-3" style="padding-inline: 5px"></div>
                                <div class="col-6 col-sm-12 col-lg-6" style="padding-inline: 5px">
                                    <div class="card card--list">
                                        <div class="row">
                                            <div class="col-12 col-sm-4">
                                                <div class="card__cover">
                                                    <img th:src="${caratula.getRuta()}" alt="portada">
                                                    <a href="#" class="card__play">
                                                        <i class="icon ion-ios-play"></i>
                                                    </a>
                                                </div>
                                            </div>

                                            <div class="col-12 col-sm-8">
                                                <div class="card__content" style="padding: 1px">
                                                    <h3 class="card__title">
                                                        <a href="#" th:text="${obra.nombre}"></a>
                                                    </h3>
                                                    <span class="card__category">
                                                    <a href="#" th:each="obraGenero : ${listaObraGenero}"
                                                       th:if="${obraGenero.idobra.id == obra.id }"
                                                       th:text="${obraGenero.idgenero.nombre}"></a>
                                                </span>

                                                    <div class="card__wrap">
<!--                                                        <span class="card__rate"><i-->
<!--                                                                class="icon ion-ios-star"></i>8.4</span>-->
                                                        <i
                                                                class="icon ion-ios-star" style="color: #e3c20d"></i>
                                                        <span class="card__rate" th:text="${califprom==null ? '-': califprom}">8.4</span>

                                                        <ul class="card__list" style="margin-left: 0px;">
                                                            <li th:text="${obra.restriccionedad == 1 ? '16+': 'Todo Público'}"></li>
                                                        </ul>
                                                    </div>

                                                    <div class="card__description">
                                                        <p th:text="${obra.descripcion}"></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <br>
                                        <br>
                                        <h4 class="home__title" style="font-size: 20px">Deja una reseña para la obra</h4>
                                        <br>
                                        <input name="idobra" th:value="${obra.id}" hidden>
                                        <div class="row">
                                            <textarea id="descripcion" rows="4" maxlength="500" name="descripcion"
                                                      style="width: 100%;height: 80%;border-color: #FFFFFF;color: #000000;border-radius: 7px">
                                                </textarea>
                                        </div>

                                        <input name="id" th:value="${id}" hidden>
                                        <input id="estrellasObra" name="obra" value="0" hidden>
                                        <div class="row">
                                            <p class="clasificacion mt-2" style="text-align: center">
                                                <input th:id="|raadio1${obra.id}|" type="radio" name="radioObra" value="5" onclick="calificarObra(this.id)">
                                                <label th:for="|raadio1${obra.id}|">★</label>
                                                <input th:id="|raadio2${obra.id}|" type="radio" name="radioObra" value="4" onclick="calificarObra(this.id)">
                                                <label th:for="|raadio2${obra.id}|">★</label>
                                                <input th:id="|raadio3${obra.id}|" type="radio" name="radioObra" value="3" onclick="calificarObra(this.id)">
                                                <label th:for="|raadio3${obra.id}|">★</label>
                                                <input th:id="|raadio4${obra.id}|" type="radio" name="radioObra" value="2" onclick="calificarObra(this.id)">
                                                <label th:for="|raadio4${obra.id}|">★</label>
                                                <input th:id="|raadio5${obra.id}|" type="radio" name="radioObra" value="1" onclick="calificarObra(this.id)">
                                                <label th:for="|raadio5${obra.id}|">★</label>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6 col-sm-12 col-lg-3" style="padding-inline: 5px"></div>
                                <!-- end card -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <div class="catalog">
                <div class="container">
                    <div class="row">
                        <!-- card -->
                        <div class="col-12" style="margin-bottom: 48px;">
                            <h1 class="home__title" style="font-size: 30px">Sede</h1>
                        </div>

                        <!-- end card -->
                    </div>

                    <div class="catalog">
                        <div class="container">
                            <div class="row" style="margin-top: 48px;">
                                <!-- card -->
                                <div class="col-6 col-sm-12 col-lg-3" style="padding-inline: 5px"></div>
                                <div class="col-6 col-sm-12 col-lg-6" style="padding-inline: 5px">
                                    <div class="card card--list">
                                        <div class="row">
                                            <div class="col-12 col-sm-4">
                                                <div class="card__cover">
                                                    <img th:src="${fotosede.getRuta()}" alt="portada">
                                                    <a href="#" class="card__play">
                                                        <i class="icon ion-ios-play"></i>
                                                    </a>
                                                </div>
                                            </div>

                                            <div class="col-12 col-sm-8">
                                                <div class="card__content" style="padding: 1px">
                                                    <h3 class="card__title">
                                                        <a href="#" th:text="${sede.getNombre()}"></a>
                                                    </h3>

                                                    <div class="card__wrap">
                                                        <!--                                                        <span class="card__rate"><i-->
                                                        <!--                                                                class="icon ion-ios-star"></i>8.4</span>-->
                                                        <i
                                                                class="icon ion-ios-star" style="color: #e3c20d"> </i>
                                                        <span class="card__rate" th:text="${califpromsede==null ? '-': califpromsede}">8.4</span>

                                                    </div>

                                                    <div class="card__description">
                                                        <p th:text="${sede.descripcion}"></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <br>
                                        <br>
                                        <h4 class="home__title" style="font-size: 20px">Deja una reseña para la obra</h4>
                                        <br>
                                        <input name="idsede" th:value="${sede.id}" hidden>
                                        <div class="row">
                                            <textarea id="descripcionsede" rows="4" maxlength="500" name="descripcionsede"
                                                      style="width: 100%;height: 80%;border-color: #FFFFFF;color: #000000;border-radius: 7px">
                                                </textarea>
                                        </div>

                                        <input id="estrellasSede" name="sede" value="0" hidden>
                                        <div class="row">
                                            <p class="clasificacion mt-2" style="text-align: center">
                                                <input th:id="|raadio1${sede.id}|" type="radio" name="radioSede" value="5" onclick="calificarSede(this.id)">
                                                <label th:for="|raadio1${sede.id}|">★</label>
                                                <input th:id="|raadio2${sede.id}|" type="radio" name="radioSede" value="4" onclick="calificarSede(this.id)">
                                                <label th:for="|raadio2${sede.id}|">★</label>
                                                <input th:id="|raadio3${sede.id}|" type="radio" name="radioSede" value="3" onclick="calificarSede(this.id)">
                                                <label th:for="|raadio3${sede.id}|">★</label>
                                                <input th:id="|raadio4${sede.id}|" type="radio" name="radioSede" value="2" onclick="calificarSede(this.id)">
                                                <label th:for="|raadio4${sede.id}|">★</label>
                                                <input th:id="|raadio5${sede.id}|" type="radio" name="radioSede" value="1" onclick="calificarSede(this.id)">
                                                <label th:for="|raadio5${sede.id}|">★</label>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6 col-sm-12 col-lg-3" style="padding-inline: 5px"></div>
                                <!-- end card -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>



            <div class="catalog">
                <div class="container">
                    <div class="row">
                        <!-- card -->
                        <div class="col-12" style="margin-bottom: 48px;">
                            <h1 class="home__title" style="font-size: 30px">Directores</h1>
                        </div>
                        <div class="col-6 col-sm-12 col-lg-3" style="padding-inline: 5px"
                             th:each=" director : ${listaDirectores}">
                            <div class="card card--list">
                                <div class="row">
                                    <div class="col-12 col-sm-9" style="text-align: center">
                                        <div class="card__cover">
                                            <img th:each="foto : ${fotosPersonas}"
                                                 th:if="${(foto.idpersona != null) && (foto.idpersona.id == director.id)}"
                                                 th:src="${foto.ruta}" alt="portada">
                                            <a href="#" class="card__play">
                                                <i class="icon ion-ios-play"></i>
                                            </a>
                                        </div>
                                        <h3 class="card__title mt-2" style="font-size: 15px">
                                            <a href="#"
                                               th:text="${director.nombres}"></a>
                                        </h3>
                                        <h3 class="card__title" style="font-size: 15px">
                                            <a href="#"
                                               th:text="${director.apellidos}"></a>
                                        </h3>
                                        <input th:id="|estrellasDirector${director.id}|" name="directores" value="0" hidden>
                                        <p class="clasificacion mt-2">
                                            <input th:id="|radio1${director.id}|" th:name="|radio${director.id}|" type="radio" value="5" onclick="calificarDirector(this.id)">
                                            <label th:for="|radio1${director.id}|">★</label>
                                            <input th:id="|radio2${director.id}|" th:name="|radio${director.id}|" type="radio" value="4" onclick="calificarDirector(this.id)">
                                            <label th:for="|radio2${director.id}|">★</label>
                                            <input th:id="|radio3${director.id}|" th:name="|radio${director.id}|" type="radio" value="3" onclick="calificarDirector(this.id)">
                                            <label th:for="|radio3${director.id}|">★</label>
                                            <input th:id="|radio4${director.id}|" th:name="|radio${director.id}|" type="radio" value="2" onclick="calificarDirector(this.id)">
                                            <label th:for="|radio4${director.id}|">★</label>
                                            <input th:id="|radio5${director.id}|" th:name="|radio${director.id}|" type="radio" value="1" onclick="calificarDirector(this.id)">
                                            <label th:for="|radio5${director.id}|">★</label>
                                        </p>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <!-- end card -->
                    </div>
                </div>
            </div>

            <div class="catalog">
                <div class="container">
                    <div class="row">
                        <!-- card -->
                        <div class="col-12 my-5">
                            <h1 class="home__title" style="font-size: 30px">Actores</h1>
                        </div>
                        <div class="col-6 col-sm-12 col-lg-3" style="padding-inline: 5px"
                             th:each=" actor : ${listaActores}">
                            <div class="card card--list">
                                <div class="row">
                                    <div class="col-12 col-sm-9" style="text-align: center">
                                        <div class="card__cover">
                                            <img th:each="foto : ${fotosPersonas}"
                                                 th:if="${(foto.idpersona != null) && (foto.idpersona.id == actor.id)}"
                                                 th:src="${foto.ruta}" alt="portada">
                                            <a href="#" class="card__play">
                                                <i class="icon ion-ios-play"></i>
                                            </a>
                                        </div>
                                        <h3 class="card__title mt-2" style="font-size: 15px">
                                            <a href="#"
                                               th:text="${actor.nombres}"></a>
                                        </h3>
                                        <h3 class="card__title" style="font-size: 15px">
                                            <a href="#"
                                               th:text="${actor.apellidos}"></a>
                                        </h3>
                                        <input th:id="|estrellasActor${actor.id}|" name="actores" value="0" hidden>
                                        <p class="clasificacion mt-2">
                                            <input th:id="|radio1${actor.id}|" th:name="|radio${actor.id}|" type="radio" value="5" onclick="calificarActor(this.id)">
                                            <label th:for="|radio1${actor.id}|">★</label>
                                            <input th:id="|radio2${actor.id}|" th:name="|radio${actor.id}|" type="radio" value="4" onclick="calificarActor(this.id)">
                                            <label th:for="|radio2${actor.id}|">★</label>
                                            <input th:id="|radio3${actor.id}|" th:name="|radio${actor.id}|" type="radio" value="3" onclick="calificarActor(this.id)">
                                            <label th:for="|radio3${actor.id}|">★</label>
                                            <input th:id="|radio4${actor.id}|" th:name="|radio${actor.id}|" type="radio" value="2" onclick="calificarActor(this.id)">
                                            <label th:for="|radio4${actor.id}|">★</label>
                                            <input th:id="|radio5${actor.id}|" th:name="|radio${actor.id}|" type="radio" value="1" onclick="calificarActor(this.id)">
                                            <label th:for="|radio5${actor.id}|">★</label>
                                        </p>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <!-- end card -->
                    </div>
                    <button type="submit" class="header__sign-in" style="margin-left: auto">
                        <i class="bi bi-cart2"></i>
                        <span>Calificar</span>
                    </button>
                </div>
            </div>
        </form>

        <div th:replace="fragments/footer :: js(~{::script})">
            <script>
                function calificarObra(calificacionObra) {
                    console.log(document.getElementById(calificacionObra).value);
                    document.getElementById("estrellasObra").value = document.getElementById(calificacionObra).value;
                }

                function calificarActor(calificacionActor) {
                    console.log(document.getElementById(calificacionActor).value);
                    // console.log(calificacionActor);
                    let id = calificacionActor.substr(6);
                    // console.log(id);
                    // console.log("estrellasActor"+id);
                    document.getElementById("estrellasActor"+id).value = document.getElementById(calificacionActor).value;
                }

                function calificarDirector(calificacionDirector) {
                    console.log(document.getElementById(calificacionDirector).value);
                    // console.log(calificacionDirector);
                    let id = calificacionDirector.substr(6);
                    // console.log(id);
                    // console.log("estrellasDirector"+id);
                    document.getElementById("estrellasDirector"+id).value = document.getElementById(calificacionDirector).value;
                }

                function calificarSede(calificacionSede) {
                    console.log(document.getElementById(calificacionSede).value);
                    document.getElementById("estrellasSede").value = document.getElementById(calificacionSede).value;
                }

            </script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
                    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
                    crossorigin="anonymous">
            </script>
        </div>
    </body>
</html>