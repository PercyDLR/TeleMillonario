<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">

<head th:replace="fragments/header :: head('Creación de Cuenta',_)"></head>

<body class="body">

	<div class="sign section--bg" th:src="@{/img/section/section.jpg}">
		<div class="container">
			<div class="row">
				<div class="col-12">
					<div class="sign__content">
						<form th:action="@{/validacionSignUp}" class="sign__form" th:object="${usuario}" method="post">
							<a th:href="@{/}" class="sign__logo">
								<img th:src="@{/img/tele.png}" alt="logo">
							</a>
							<div class="sign__group">
								<input type="text" class="sign__input" placeholder="Nombres" name = "nombres" th:value="${usuario.getNombres()}" required autofocus maxlength="100"
									   th:classappend="${#fields.hasErrors('nombres')?'is-invalid':''}">
								<div class="invalid-feedback" th:if="${#fields.hasErrors('nombres')}"
									 th:errors="*{nombres}"></div>
							</div>

							<div class="sign__group">
								<input type="text" class="sign__input" placeholder="Apellidos" name = "apellidos" th:value="${usuario.getApellidos()}" required maxlength="100"
									   th:classappend="${#fields.hasErrors('apellidos')?'is-invalid':''}">
								<div class="invalid-feedback" th:if="${#fields.hasErrors('apellidos')}"
									 th:errors="*{apellidos}"></div>

							</div>
							<div class="sign__group">
								<input type="text" class="sign__input" placeholder="DNI" name = "dni" th:value="${usuario.getDni()}" required maxlength="8"
									   th:classappend="${#fields.hasErrors('dni')?'is-invalid':''}">
								<div class="invalid-feedback" th:if="${#fields.hasErrors('dni')}"
									 th:errors="*{dni}"></div>
								<div class="invalid-feedback d-block" th:if="${(errDni != null) && (errDni eq 1)}">El DNI ingresado ya está en uso</div>

							</div>
							<div class="sign__group">
								<input type="email" class="sign__input" placeholder="Correo" name="correo" th:value="${usuario.getCorreo()}" required maxlength="100"
									   th:classappend="${#fields.hasErrors('correo')?'is-invalid':''}">
								<div class="invalid-feedback" th:if="${#fields.hasErrors('correo')}"
									 th:errors="*{correo}"></div>
								<div class="invalid-feedback d-block" th:if="${(errCorreo != null) && (errCorreo eq 1)}">El correo ingresado ya está en uso</div>
							</div>

							<div class="sign__group">
								<input type="text" class="sign__input" placeholder="Teléfono" name="telefono" th:value="${usuario.getTelefono()}" required maxlength="9"
									   th:classappend="${#fields.hasErrors('telefono')?'is-invalid':''}">
								<div class="invalid-feedback" th:if="${#fields.hasErrors('telefono')}"
									 th:errors="*{telefono}"></div>
							</div>

							<div class="sign__group">
								<input type="date" id="datePickerId" class="sign__input" placeholder="Fecha de Nacimiento" name="nacimiento" th:value="${usuario.getNacimiento()}" onfocus="(this.type='date')" required>
								<div class="invalid-feedback d-block" th:if="${(errDate != null) && (errDate eq -1)}">La fecha ingresada debe ser hasta un dia antes de la fecha actual</div>
							</div>

							<div class="sign__group">
								<input type="text" class="sign__input" placeholder="Dirección" name="direccion" th:value="${usuario.getDireccion()}" required maxlength="100">
							</div>

							<div class="sign__group">
								<input type="password" class="sign__input" placeholder="Contraseña" name="contrasenia" id="contrasenia" required maxlength="200"
									   th:classappend="${#fields.hasErrors('contrasenia')?'is-invalid':''}">
								<div class="invalid-feedback" th:if="${#fields.hasErrors('contrasenia')}"
									 th:errors="*{contrasenia}"></div>
							</div>
							<div class="sign__group">
								<input type="password" class="sign__input" placeholder="Confirmar Contraseña" id="recontrasenia" name="recontrasenia" required maxlength="200">
								<div class="invalid-feedback" id="coindicencia">Las contraseñas no coinciden</div>
								<div class="invalid-feedback d-block" th:if="${(errRecontrasenia != null) && (errRecontrasenia eq 1)}">Ambos campos de contraseña deben ser llenados</div>
							</div>

							<button class="sign__btn" type="submit" id="btnSubmit" onclick="return Validate()">Registrarse</button>

							<span class="sign__text">¿Ya tienes una cuenta?<a th:href="@{/login}"><span style="margin-right: 15px"></span>Ingresar</a></span>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div th:replace="fragments/footer :: js(~{::script})">
		<script type="text/javascript">

			var d = new Date()
			d.setDate(d.getDate() - 1)
			datePickerId.max = d.toISOString().split("T")[0] ;

			function Validate() {
				var password = document.getElementById("contrasenia").value;
				var confirmPassword = document.getElementById("recontrasenia").value;
				var x = document.getElementById("coindicencia");
				x.style.display = "none";

				if (password != confirmPassword) {
					x.style.display = "block";
					return false;
				}
				return true;
			}

		</script>

		<!--

		-->

	</div>
</body>

</html>