<!DOCTYPE html>
<html  xmlns:th="http://www.thymeleaf.org" lang="es">

<head th:replace="fragments/header :: head('Inicio de Sesión',_)"></head>

<body class="body">
	<div class="content" style="padding: 0">
		<div class="sign">
			<div class="container">
				<div class="row">
					<div class="col-12">
						<div class="sign__content">

							<div class="alert alert-success alert-dismissible fade show" role="alert" th:if="${(msg != null) && (msg eq 1)}" style="position: absolute; left: 800px; top: 550px">
								<i class="bi bi-check-circle-fill"></i>
								<strong>Usuario creado correctamente</strong>
								<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
							</div>

							<form class="sign__form" th:action="@{/processLogin}" method="POST">
								<a th:href="@{/}" class="sign__logo">
									<img th:src="@{/img/tele.png}" alt="logo">
								</a>
								<div class="sign__group">
									<input type="text" class="sign__input" name="username" placeholder="Correo" autofocus>
								</div>
								<div class="sign__group" style="margin-bottom: 0">
									<input type="password" autocomplete="current-password" id="current-password" name="password" class="sign__input" placeholder="Contraseña">
                                    <i class="mostrar bi bi-eye-fill"></i>
                                </div>
								<div class="invalid-feedback d-block" th:if="${param.error}" style="text-align: center">Correo o contraseña incorrectos</div>
								<button class="sign__btn" type="submit">Ingresar</button>

								<span class="sign__text" style="text-align: center">¿No tienes una cuenta?<a th:href="@{/crearCuenta}"><span style="margin-right: 5px"></span>Regístrate</a></span>
								<span class="sign__text" style="margin-top: 5px;">ó</span>
								<a class="sign__btn__google" href="/oauth2/authorization/google" style="margin-top: 5px;"><img th:src="@{/img/iconGoogle.png}" alt="Google" width="20px" height="20px" style="margin-top: 0px;margin-right: 9px;">Regístrate con Google</a>

								<span class="sign__text"><a th:href="@{/cambioDeContrasenia}">¿Olvidaste tu contraseña?</a></span>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

    <div th:replace="fragments/footer :: js(~{::script})">
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
				integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
				crossorigin="anonymous"></script>
        <script>
            $('.mostrar').click(function (){
                if(this.classList.contains('bi-eye-fill')){
                    this.classList.replace('bi-eye-fill','bi-eye-slash-fill')
                    console.log(this.previousElementSibling)
                    this.previousElementSibling.type = 'text';
                } else{
                    this.classList.replace('bi-eye-slash-fill','bi-eye-fill')
                    console.log(this.previousElementSibling)
                    this.previousElementSibling.type = 'password';
                }
            })
        </script>
	</div>
</body>

</html>